{"ast":null,"code":"'use strict';\n/**\n * Custom implementation of a double ended queue.\n */\n\nfunction Denque(array, options) {\n  var options = options || {};\n  this._capacity = options.capacity;\n  this._head = 0;\n  this._tail = 0;\n\n  if (Array.isArray(array)) {\n    this._fromArray(array);\n  } else {\n    this._capacityMask = 0x3;\n    this._list = new Array(4);\n  }\n}\n/**\n * --------------\n *  PUBLIC API\n * -------------\n */\n\n/**\n * Returns the item at the specified index from the list.\n * 0 is the first element, 1 is the second, and so on...\n * Elements at negative values are that many from the end: -1 is one before the end\n * (the last element), -2 is two before the end (one before last), etc.\n * @param index\n * @returns {*}\n */\n\n\nDenque.prototype.peekAt = function peekAt(index) {\n  var i = index; // expect a number or return undefined\n\n  if (i !== (i | 0)) {\n    return void 0;\n  }\n\n  var len = this.size();\n  if (i >= len || i < -len) return undefined;\n  if (i < 0) i += len;\n  i = this._head + i & this._capacityMask;\n  return this._list[i];\n};\n/**\n * Alias for peekAt()\n * @param i\n * @returns {*}\n */\n\n\nDenque.prototype.get = function get(i) {\n  return this.peekAt(i);\n};\n/**\n * Returns the first item in the list without removing it.\n * @returns {*}\n */\n\n\nDenque.prototype.peek = function peek() {\n  if (this._head === this._tail) return undefined;\n  return this._list[this._head];\n};\n/**\n * Alias for peek()\n * @returns {*}\n */\n\n\nDenque.prototype.peekFront = function peekFront() {\n  return this.peek();\n};\n/**\n * Returns the item that is at the back of the queue without removing it.\n * Uses peekAt(-1)\n */\n\n\nDenque.prototype.peekBack = function peekBack() {\n  return this.peekAt(-1);\n};\n/**\n * Returns the current length of the queue\n * @return {Number}\n */\n\n\nObject.defineProperty(Denque.prototype, 'length', {\n  get: function length() {\n    return this.size();\n  }\n});\n/**\n * Return the number of items on the list, or 0 if empty.\n * @returns {number}\n */\n\nDenque.prototype.size = function size() {\n  if (this._head === this._tail) return 0;\n  if (this._head < this._tail) return this._tail - this._head;else return this._capacityMask + 1 - (this._head - this._tail);\n};\n/**\n * Add an item at the beginning of the list.\n * @param item\n */\n\n\nDenque.prototype.unshift = function unshift(item) {\n  if (arguments.length === 0) return this.size();\n  var len = this._list.length;\n  this._head = this._head - 1 + len & this._capacityMask;\n  this._list[this._head] = item;\n  if (this._tail === this._head) this._growArray();\n  if (this._capacity && this.size() > this._capacity) this.pop();\n  if (this._head < this._tail) return this._tail - this._head;else return this._capacityMask + 1 - (this._head - this._tail);\n};\n/**\n * Remove and return the first item on the list,\n * Returns undefined if the list is empty.\n * @returns {*}\n */\n\n\nDenque.prototype.shift = function shift() {\n  var head = this._head;\n  if (head === this._tail) return undefined;\n  var item = this._list[head];\n  this._list[head] = undefined;\n  this._head = head + 1 & this._capacityMask;\n  if (head < 2 && this._tail > 10000 && this._tail <= this._list.length >>> 2) this._shrinkArray();\n  return item;\n};\n/**\n * Add an item to the bottom of the list.\n * @param item\n */\n\n\nDenque.prototype.push = function push(item) {\n  if (arguments.length === 0) return this.size();\n  var tail = this._tail;\n  this._list[tail] = item;\n  this._tail = tail + 1 & this._capacityMask;\n\n  if (this._tail === this._head) {\n    this._growArray();\n  }\n\n  if (this._capacity && this.size() > this._capacity) {\n    this.shift();\n  }\n\n  if (this._head < this._tail) return this._tail - this._head;else return this._capacityMask + 1 - (this._head - this._tail);\n};\n/**\n * Remove and return the last item on the list.\n * Returns undefined if the list is empty.\n * @returns {*}\n */\n\n\nDenque.prototype.pop = function pop() {\n  var tail = this._tail;\n  if (tail === this._head) return undefined;\n  var len = this._list.length;\n  this._tail = tail - 1 + len & this._capacityMask;\n  var item = this._list[this._tail];\n  this._list[this._tail] = undefined;\n  if (this._head < 2 && tail > 10000 && tail <= len >>> 2) this._shrinkArray();\n  return item;\n};\n/**\n * Remove and return the item at the specified index from the list.\n * Returns undefined if the list is empty.\n * @param index\n * @returns {*}\n */\n\n\nDenque.prototype.removeOne = function removeOne(index) {\n  var i = index; // expect a number or return undefined\n\n  if (i !== (i | 0)) {\n    return void 0;\n  }\n\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size) return void 0;\n  if (i < 0) i += size;\n  i = this._head + i & this._capacityMask;\n  var item = this._list[i];\n  var k;\n\n  if (index < size / 2) {\n    for (k = index; k > 0; k--) {\n      this._list[i] = this._list[i = i - 1 + len & this._capacityMask];\n    }\n\n    this._list[i] = void 0;\n    this._head = this._head + 1 + len & this._capacityMask;\n  } else {\n    for (k = size - 1 - index; k > 0; k--) {\n      this._list[i] = this._list[i = i + 1 + len & this._capacityMask];\n    }\n\n    this._list[i] = void 0;\n    this._tail = this._tail - 1 + len & this._capacityMask;\n  }\n\n  return item;\n};\n/**\n * Remove number of items from the specified index from the list.\n * Returns array of removed items.\n * Returns undefined if the list is empty.\n * @param index\n * @param count\n * @returns {array}\n */\n\n\nDenque.prototype.remove = function remove(index, count) {\n  var i = index;\n  var removed;\n  var del_count = count; // expect a number or return undefined\n\n  if (i !== (i | 0)) {\n    return void 0;\n  }\n\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size || count < 1) return void 0;\n  if (i < 0) i += size;\n\n  if (count === 1 || !count) {\n    removed = new Array(1);\n    removed[0] = this.removeOne(i);\n    return removed;\n  }\n\n  if (i === 0 && i + count >= size) {\n    removed = this.toArray();\n    this.clear();\n    return removed;\n  }\n\n  if (i + count > size) count = size - i;\n  var k;\n  removed = new Array(count);\n\n  for (k = 0; k < count; k++) {\n    removed[k] = this._list[this._head + i + k & this._capacityMask];\n  }\n\n  i = this._head + i & this._capacityMask;\n\n  if (index + count === size) {\n    this._tail = this._tail - count + len & this._capacityMask;\n\n    for (k = count; k > 0; k--) {\n      this._list[i = i + 1 + len & this._capacityMask] = void 0;\n    }\n\n    return removed;\n  }\n\n  if (index === 0) {\n    this._head = this._head + count + len & this._capacityMask;\n\n    for (k = count - 1; k > 0; k--) {\n      this._list[i = i + 1 + len & this._capacityMask] = void 0;\n    }\n\n    return removed;\n  }\n\n  if (i < size / 2) {\n    this._head = this._head + index + count + len & this._capacityMask;\n\n    for (k = index; k > 0; k--) {\n      this.unshift(this._list[i = i - 1 + len & this._capacityMask]);\n    }\n\n    i = this._head - 1 + len & this._capacityMask;\n\n    while (del_count > 0) {\n      this._list[i = i - 1 + len & this._capacityMask] = void 0;\n      del_count--;\n    }\n\n    if (index < 0) this._tail = i;\n  } else {\n    this._tail = i;\n    i = i + count + len & this._capacityMask;\n\n    for (k = size - (count + index); k > 0; k--) {\n      this.push(this._list[i++]);\n    }\n\n    i = this._tail;\n\n    while (del_count > 0) {\n      this._list[i = i + 1 + len & this._capacityMask] = void 0;\n      del_count--;\n    }\n  }\n\n  if (this._head < 2 && this._tail > 10000 && this._tail <= len >>> 2) this._shrinkArray();\n  return removed;\n};\n/**\n * Native splice implementation.\n * Remove number of items from the specified index from the list and/or add new elements.\n * Returns array of removed items or empty array if count == 0.\n * Returns undefined if the list is empty.\n *\n * @param index\n * @param count\n * @param {...*} [elements]\n * @returns {array}\n */\n\n\nDenque.prototype.splice = function splice(index, count) {\n  var i = index; // expect a number or return undefined\n\n  if (i !== (i | 0)) {\n    return void 0;\n  }\n\n  var size = this.size();\n  if (i < 0) i += size;\n  if (i > size) return void 0;\n\n  if (arguments.length > 2) {\n    var k;\n    var temp;\n    var removed;\n    var arg_len = arguments.length;\n    var len = this._list.length;\n    var arguments_index = 2;\n\n    if (!size || i < size / 2) {\n      temp = new Array(i);\n\n      for (k = 0; k < i; k++) {\n        temp[k] = this._list[this._head + k & this._capacityMask];\n      }\n\n      if (count === 0) {\n        removed = [];\n\n        if (i > 0) {\n          this._head = this._head + i + len & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._head = this._head + i + len & this._capacityMask;\n      }\n\n      while (arg_len > arguments_index) {\n        this.unshift(arguments[--arg_len]);\n      }\n\n      for (k = i; k > 0; k--) {\n        this.unshift(temp[k - 1]);\n      }\n    } else {\n      temp = new Array(size - (i + count));\n      var leng = temp.length;\n\n      for (k = 0; k < leng; k++) {\n        temp[k] = this._list[this._head + i + count + k & this._capacityMask];\n      }\n\n      if (count === 0) {\n        removed = [];\n\n        if (i != size) {\n          this._tail = this._head + i + len & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._tail = this._tail - leng + len & this._capacityMask;\n      }\n\n      while (arguments_index < arg_len) {\n        this.push(arguments[arguments_index++]);\n      }\n\n      for (k = 0; k < leng; k++) {\n        this.push(temp[k]);\n      }\n    }\n\n    return removed;\n  } else {\n    return this.remove(i, count);\n  }\n};\n/**\n * Soft clear - does not reset capacity.\n */\n\n\nDenque.prototype.clear = function clear() {\n  this._list = new Array(this._list.length);\n  this._head = 0;\n  this._tail = 0;\n};\n/**\n * Returns true or false whether the list is empty.\n * @returns {boolean}\n */\n\n\nDenque.prototype.isEmpty = function isEmpty() {\n  return this._head === this._tail;\n};\n/**\n * Returns an array of all queue items.\n * @returns {Array}\n */\n\n\nDenque.prototype.toArray = function toArray() {\n  return this._copyArray(false);\n};\n/**\n * -------------\n *   INTERNALS\n * -------------\n */\n\n/**\n * Fills the queue with items from an array\n * For use in the constructor\n * @param array\n * @private\n */\n\n\nDenque.prototype._fromArray = function _fromArray(array) {\n  var length = array.length;\n\n  var capacity = this._nextPowerOf2(length);\n\n  this._list = new Array(capacity);\n  this._capacityMask = capacity - 1;\n  this._tail = length;\n\n  for (var i = 0; i < length; i++) this._list[i] = array[i];\n};\n/**\n *\n * @param fullCopy\n * @param size Initialize the array with a specific size. Will default to the current list size\n * @returns {Array}\n * @private\n */\n\n\nDenque.prototype._copyArray = function _copyArray(fullCopy, size) {\n  var src = this._list;\n  var capacity = src.length;\n  var length = this.length;\n  size = size | length; // No prealloc requested and the buffer is contiguous\n\n  if (size == length && this._head < this._tail) {\n    // Simply do a fast slice copy\n    return this._list.slice(this._head, this._tail);\n  }\n\n  var dest = new Array(size);\n  var k = 0;\n  var i;\n\n  if (fullCopy || this._head > this._tail) {\n    for (i = this._head; i < capacity; i++) dest[k++] = src[i];\n\n    for (i = 0; i < this._tail; i++) dest[k++] = src[i];\n  } else {\n    for (i = this._head; i < this._tail; i++) dest[k++] = src[i];\n  }\n\n  return dest;\n};\n/**\n * Grows the internal list array.\n * @private\n */\n\n\nDenque.prototype._growArray = function _growArray() {\n  if (this._head != 0) {\n    // double array size and copy existing data, head to end, then beginning to tail.\n    var newList = this._copyArray(true, this._list.length << 1);\n\n    this._tail = this._list.length;\n    this._head = 0;\n    this._list = newList;\n  } else {\n    this._tail = this._list.length;\n    this._list.length <<= 1;\n  }\n\n  this._capacityMask = this._capacityMask << 1 | 1;\n};\n/**\n * Shrinks the internal list array.\n * @private\n */\n\n\nDenque.prototype._shrinkArray = function _shrinkArray() {\n  this._list.length >>>= 1;\n  this._capacityMask >>>= 1;\n};\n/**\n * Find the next power of 2, at least 4\n * @private\n * @param {number} num \n * @returns {number}\n */\n\n\nDenque.prototype._nextPowerOf2 = function _nextPowerOf2(num) {\n  var log2 = Math.log(num) / Math.log(2);\n  var nextPow2 = 1 << log2 + 1;\n  return Math.max(nextPow2, 4);\n};\n\nmodule.exports = Denque;","map":{"version":3,"sources":["C:/Users/AnÄ‘elo/node_modules/denque/index.js"],"names":["Denque","array","options","_capacity","capacity","_head","_tail","Array","isArray","_fromArray","_capacityMask","_list","prototype","peekAt","index","i","len","size","undefined","get","peek","peekFront","peekBack","Object","defineProperty","length","unshift","item","arguments","_growArray","pop","shift","head","_shrinkArray","push","tail","removeOne","k","remove","count","removed","del_count","toArray","clear","splice","temp","arg_len","arguments_index","leng","isEmpty","_copyArray","_nextPowerOf2","fullCopy","src","slice","dest","newList","num","log2","Math","log","nextPow2","max","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\n/**\n * Custom implementation of a double ended queue.\n */\nfunction Denque(array, options) {\n  var options = options || {};\n  this._capacity = options.capacity;\n\n  this._head = 0;\n  this._tail = 0;\n\n  if (Array.isArray(array)) {\n    this._fromArray(array);\n  } else {\n    this._capacityMask = 0x3;\n    this._list = new Array(4);\n  }\n}\n\n/**\n * --------------\n *  PUBLIC API\n * -------------\n */\n\n/**\n * Returns the item at the specified index from the list.\n * 0 is the first element, 1 is the second, and so on...\n * Elements at negative values are that many from the end: -1 is one before the end\n * (the last element), -2 is two before the end (one before last), etc.\n * @param index\n * @returns {*}\n */\nDenque.prototype.peekAt = function peekAt(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var len = this.size();\n  if (i >= len || i < -len) return undefined;\n  if (i < 0) i += len;\n  i = (this._head + i) & this._capacityMask;\n  return this._list[i];\n};\n\n/**\n * Alias for peekAt()\n * @param i\n * @returns {*}\n */\nDenque.prototype.get = function get(i) {\n  return this.peekAt(i);\n};\n\n/**\n * Returns the first item in the list without removing it.\n * @returns {*}\n */\nDenque.prototype.peek = function peek() {\n  if (this._head === this._tail) return undefined;\n  return this._list[this._head];\n};\n\n/**\n * Alias for peek()\n * @returns {*}\n */\nDenque.prototype.peekFront = function peekFront() {\n  return this.peek();\n};\n\n/**\n * Returns the item that is at the back of the queue without removing it.\n * Uses peekAt(-1)\n */\nDenque.prototype.peekBack = function peekBack() {\n  return this.peekAt(-1);\n};\n\n/**\n * Returns the current length of the queue\n * @return {Number}\n */\nObject.defineProperty(Denque.prototype, 'length', {\n  get: function length() {\n    return this.size();\n  }\n});\n\n/**\n * Return the number of items on the list, or 0 if empty.\n * @returns {number}\n */\nDenque.prototype.size = function size() {\n  if (this._head === this._tail) return 0;\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Add an item at the beginning of the list.\n * @param item\n */\nDenque.prototype.unshift = function unshift(item) {\n  if (arguments.length === 0) return this.size();\n  var len = this._list.length;\n  this._head = (this._head - 1 + len) & this._capacityMask;\n  this._list[this._head] = item;\n  if (this._tail === this._head) this._growArray();\n  if (this._capacity && this.size() > this._capacity) this.pop();\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the first item on the list,\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.shift = function shift() {\n  var head = this._head;\n  if (head === this._tail) return undefined;\n  var item = this._list[head];\n  this._list[head] = undefined;\n  this._head = (head + 1) & this._capacityMask;\n  if (head < 2 && this._tail > 10000 && this._tail <= this._list.length >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Add an item to the bottom of the list.\n * @param item\n */\nDenque.prototype.push = function push(item) {\n  if (arguments.length === 0) return this.size();\n  var tail = this._tail;\n  this._list[tail] = item;\n  this._tail = (tail + 1) & this._capacityMask;\n  if (this._tail === this._head) {\n    this._growArray();\n  }\n  if (this._capacity && this.size() > this._capacity) {\n    this.shift();\n  }\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the last item on the list.\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.pop = function pop() {\n  var tail = this._tail;\n  if (tail === this._head) return undefined;\n  var len = this._list.length;\n  this._tail = (tail - 1 + len) & this._capacityMask;\n  var item = this._list[this._tail];\n  this._list[this._tail] = undefined;\n  if (this._head < 2 && tail > 10000 && tail <= len >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Remove and return the item at the specified index from the list.\n * Returns undefined if the list is empty.\n * @param index\n * @returns {*}\n */\nDenque.prototype.removeOne = function removeOne(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size) return void 0;\n  if (i < 0) i += size;\n  i = (this._head + i) & this._capacityMask;\n  var item = this._list[i];\n  var k;\n  if (index < size / 2) {\n    for (k = index; k > 0; k--) {\n      this._list[i] = this._list[i = (i - 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._head = (this._head + 1 + len) & this._capacityMask;\n  } else {\n    for (k = size - 1 - index; k > 0; k--) {\n      this._list[i] = this._list[i = (i + 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._tail = (this._tail - 1 + len) & this._capacityMask;\n  }\n  return item;\n};\n\n/**\n * Remove number of items from the specified index from the list.\n * Returns array of removed items.\n * Returns undefined if the list is empty.\n * @param index\n * @param count\n * @returns {array}\n */\nDenque.prototype.remove = function remove(index, count) {\n  var i = index;\n  var removed;\n  var del_count = count;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size || count < 1) return void 0;\n  if (i < 0) i += size;\n  if (count === 1 || !count) {\n    removed = new Array(1);\n    removed[0] = this.removeOne(i);\n    return removed;\n  }\n  if (i === 0 && i + count >= size) {\n    removed = this.toArray();\n    this.clear();\n    return removed;\n  }\n  if (i + count > size) count = size - i;\n  var k;\n  removed = new Array(count);\n  for (k = 0; k < count; k++) {\n    removed[k] = this._list[(this._head + i + k) & this._capacityMask];\n  }\n  i = (this._head + i) & this._capacityMask;\n  if (index + count === size) {\n    this._tail = (this._tail - count + len) & this._capacityMask;\n    for (k = count; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (index === 0) {\n    this._head = (this._head + count + len) & this._capacityMask;\n    for (k = count - 1; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (i < size / 2) {\n    this._head = (this._head + index + count + len) & this._capacityMask;\n    for (k = index; k > 0; k--) {\n      this.unshift(this._list[i = (i - 1 + len) & this._capacityMask]);\n    }\n    i = (this._head - 1 + len) & this._capacityMask;\n    while (del_count > 0) {\n      this._list[i = (i - 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n    if (index < 0) this._tail = i;\n  } else {\n    this._tail = i;\n    i = (i + count + len) & this._capacityMask;\n    for (k = size - (count + index); k > 0; k--) {\n      this.push(this._list[i++]);\n    }\n    i = this._tail;\n    while (del_count > 0) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n  }\n  if (this._head < 2 && this._tail > 10000 && this._tail <= len >>> 2) this._shrinkArray();\n  return removed;\n};\n\n/**\n * Native splice implementation.\n * Remove number of items from the specified index from the list and/or add new elements.\n * Returns array of removed items or empty array if count == 0.\n * Returns undefined if the list is empty.\n *\n * @param index\n * @param count\n * @param {...*} [elements]\n * @returns {array}\n */\nDenque.prototype.splice = function splice(index, count) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var size = this.size();\n  if (i < 0) i += size;\n  if (i > size) return void 0;\n  if (arguments.length > 2) {\n    var k;\n    var temp;\n    var removed;\n    var arg_len = arguments.length;\n    var len = this._list.length;\n    var arguments_index = 2;\n    if (!size || i < size / 2) {\n      temp = new Array(i);\n      for (k = 0; k < i; k++) {\n        temp[k] = this._list[(this._head + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i > 0) {\n          this._head = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._head = (this._head + i + len) & this._capacityMask;\n      }\n      while (arg_len > arguments_index) {\n        this.unshift(arguments[--arg_len]);\n      }\n      for (k = i; k > 0; k--) {\n        this.unshift(temp[k - 1]);\n      }\n    } else {\n      temp = new Array(size - (i + count));\n      var leng = temp.length;\n      for (k = 0; k < leng; k++) {\n        temp[k] = this._list[(this._head + i + count + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i != size) {\n          this._tail = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._tail = (this._tail - leng + len) & this._capacityMask;\n      }\n      while (arguments_index < arg_len) {\n        this.push(arguments[arguments_index++]);\n      }\n      for (k = 0; k < leng; k++) {\n        this.push(temp[k]);\n      }\n    }\n    return removed;\n  } else {\n    return this.remove(i, count);\n  }\n};\n\n/**\n * Soft clear - does not reset capacity.\n */\nDenque.prototype.clear = function clear() {\n  this._list = new Array(this._list.length);\n  this._head = 0;\n  this._tail = 0;\n};\n\n/**\n * Returns true or false whether the list is empty.\n * @returns {boolean}\n */\nDenque.prototype.isEmpty = function isEmpty() {\n  return this._head === this._tail;\n};\n\n/**\n * Returns an array of all queue items.\n * @returns {Array}\n */\nDenque.prototype.toArray = function toArray() {\n  return this._copyArray(false);\n};\n\n/**\n * -------------\n *   INTERNALS\n * -------------\n */\n\n/**\n * Fills the queue with items from an array\n * For use in the constructor\n * @param array\n * @private\n */\nDenque.prototype._fromArray = function _fromArray(array) {\n  var length = array.length;\n  var capacity = this._nextPowerOf2(length);\n\n  this._list = new Array(capacity);\n  this._capacityMask = capacity - 1;\n  this._tail = length;\n\n  for (var i = 0; i < length; i++) this._list[i] = array[i];\n};\n\n/**\n *\n * @param fullCopy\n * @param size Initialize the array with a specific size. Will default to the current list size\n * @returns {Array}\n * @private\n */\nDenque.prototype._copyArray = function _copyArray(fullCopy, size) {\n  var src = this._list;\n  var capacity = src.length;\n  var length = this.length;\n  size = size | length;\n\n  // No prealloc requested and the buffer is contiguous\n  if (size == length && this._head < this._tail) {\n    // Simply do a fast slice copy\n    return this._list.slice(this._head, this._tail);\n  }\n\n  var dest = new Array(size);\n\n  var k = 0;\n  var i;\n  if (fullCopy || this._head > this._tail) {\n    for (i = this._head; i < capacity; i++) dest[k++] = src[i];\n    for (i = 0; i < this._tail; i++) dest[k++] = src[i];\n  } else {\n    for (i = this._head; i < this._tail; i++) dest[k++] = src[i];\n  }\n\n  return dest;\n}\n\n/**\n * Grows the internal list array.\n * @private\n */\nDenque.prototype._growArray = function _growArray() {\n  if (this._head != 0) {\n    // double array size and copy existing data, head to end, then beginning to tail.\n    var newList = this._copyArray(true, this._list.length << 1);\n\n    this._tail = this._list.length;\n    this._head = 0;\n\n    this._list = newList;\n  } else {\n    this._tail = this._list.length;\n    this._list.length <<= 1;\n  }\n\n  this._capacityMask = (this._capacityMask << 1) | 1;\n};\n\n/**\n * Shrinks the internal list array.\n * @private\n */\nDenque.prototype._shrinkArray = function _shrinkArray() {\n  this._list.length >>>= 1;\n  this._capacityMask >>>= 1;\n};\n\n/**\n * Find the next power of 2, at least 4\n * @private\n * @param {number} num \n * @returns {number}\n */\nDenque.prototype._nextPowerOf2 = function _nextPowerOf2(num) {\n  var log2 = Math.log(num) / Math.log(2);\n  var nextPow2 = 1 << (log2 + 1);\n\n  return Math.max(nextPow2, 4);\n}\n\nmodule.exports = Denque;\n"]},"metadata":{},"sourceType":"script"}